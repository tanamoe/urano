syntax = "proto3";

package urano.api.v1beta1;

import "urano/types/v1beta1/size.proto";

service AggregateService {
  rpc GetFahasaProduct(GetFahasaProductRequest) returns (GetFahasaProductResponse) {}

  // Paginated endpoint, https://google.aip.dev/158
  rpc ListFahasaProduct(ListFahasaProductRequest) returns (ListFahasaProductResponse) {}

  rpc GetAMAKProduct(GetAMAKProductRequest) returns (GetAMAKProductResponse) {}

  rpc GetNXBTreProduct(GetNXBTreProductRequest) returns (GetNXBTreProductResponse) {}
}

message AggregateProduct {
  string id = 1;
  string name = 2;
  string description = 3;
  // 4 left for future metadata
  int64 price = 5;
  string sku = 6;
  string isbn = 7;
  double weight = 8;
  urano.types.v1beta1.Size size = 9;
  uint32 page_count = 10;
  // 11-19 left for future metadata needs
  repeated string images = 20;
}

message GetFahasaProductRequest {
  int64 id = 1;
}

message GetFahasaProductResponse {
  AggregateProduct product = 1;
}

// The request structure for listing products from Fahasa.
message ListFahasaProductRequest {
  // The category that contains the products.
  int64 category_id = 1;

  // The maximum number of products to return.
  int32 page_size = 5;

  // A token received from previous call, used to retrieve subsequent page.
  // This token when used must be called with the same prior `page_size`
  // parameters, or it will be invalid.
  //
  // If empty, start from the beginning.
  string page_token = 6;

  // The number of products to skip, calulated from `page_token`.
  int32 skip = 7;
}

// The response structure from Fahasa product listing.
message ListFahasaProductResponse {
  // The products match provided filter(s).
  repeated AggregateProduct products = 1;

  // A token that can be used to retrieve the next page.
  // If there is no `page_token`, there are no subsequent page.
  string page_token = 2;
}

message GetAMAKProductRequest {
  int64 id = 1;
}

message GetAMAKProductResponse {
  AggregateProduct product = 1;
}

message GetNXBTreProductRequest {
  int64 id = 1;
}

message GetNXBTreProductResponse {
  AggregateProduct product = 1;
}
